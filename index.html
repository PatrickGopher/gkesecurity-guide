



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-\.]+">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>The Unofficial GKE Security Guide</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#the-unofficial-google-kubernetes-engine-gke-security-guide" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="." title="The Unofficial GKE Security Guide" class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              The Unofficial GKE Security Guide
            </span>
            <span class="md-header-nav__topic">
              
                Introduction
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/bgeesaman/gkesecurity-guide/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    bgeesaman/gkesecurity-guide
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="." title="The Unofficial GKE Security Guide" class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </a>
    The Unofficial GKE Security Guide
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/bgeesaman/gkesecurity-guide/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    bgeesaman/gkesecurity-guide
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Introduction
      </label>
    
    <a href="." title="Introduction" class="md-nav__link md-nav__link--active">
      Introduction
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#audience" title="Audience" class="md-nav__link">
    Audience
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structure-of-this-guide" title="Structure of this Guide" class="md-nav__link">
    Structure of this Guide
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gke-vs-building-kubernetes-yourself" title="GKE vs Building Kubernetes Yourself" class="md-nav__link">
    GKE vs Building Kubernetes Yourself
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubernetes-security-maturity" title="Kubernetes Security Maturity" class="md-nav__link">
    Kubernetes Security Maturity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" title="Contributing" class="md-nav__link">
    Contributing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-the-authors" title="About the Author(s)" class="md-nav__link">
    About the Author(s)
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="cloud_environment/" title="Cloud Environment" class="md-nav__link">
      Cloud Environment
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="project_organization/" title="Project Organization" class="md-nav__link">
      Project Organization
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="cluster_configuration/" title="Cluster Configuration" class="md-nav__link">
      Cluster Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="cluster_lifecycle/" title="Cluster Lifecycle" class="md-nav__link">
      Cluster Lifecycle
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="cluster_observability/" title="Cluster Observability" class="md-nav__link">
      Cluster Observability
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="cluster_addons/" title="Cluster Add-ons" class="md-nav__link">
      Cluster Add-ons
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="workload_configuration/" title="Workload Configuration" class="md-nav__link">
      Workload Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="container_images/" title="Container Images" class="md-nav__link">
      Container Images
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="audit_and_compliance/" title="Audit and Compliance" class="md-nav__link">
      Audit and Compliance
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="detection_and_response/" title="Detection and Response" class="md-nav__link">
      Detection and Response
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="weaknesses_and_misconfigurations/" title="Common Weaknesses and Misconfigurations" class="md-nav__link">
      Common Weaknesses and Misconfigurations
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#audience" title="Audience" class="md-nav__link">
    Audience
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structure-of-this-guide" title="Structure of this Guide" class="md-nav__link">
    Structure of this Guide
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gke-vs-building-kubernetes-yourself" title="GKE vs Building Kubernetes Yourself" class="md-nav__link">
    GKE vs Building Kubernetes Yourself
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubernetes-security-maturity" title="Kubernetes Security Maturity" class="md-nav__link">
    Kubernetes Security Maturity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" title="Contributing" class="md-nav__link">
    Contributing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-the-authors" title="About the Author(s)" class="md-nav__link">
    About the Author(s)
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/bgeesaman/gkesecurity-guide/edit/master/docs/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="the-unofficial-google-kubernetes-engine-gke-security-guide">The Unofficial Google Kubernetes Engine (GKE) Security Guide<a class="headerlink" href="#the-unofficial-google-kubernetes-engine-gke-security-guide" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Disclaimer</p>
<p>This guide is not an official guide, is not endorsed by <a href="https://google.com">Google</a>, and is comprised entirely from publicly available information.  The information is provided "as-is", without warranty or fit for a particular purpose.  You should fully understand the security implications of each recommendation before applying it in your environment.</p>
</div>
<p>There are several books on the topic of getting <a href="http://shop.oreilly.com/product/0636920043874.do">Kubernetes Up and Running</a> and even one specific to <a href="https://kubernetes-security.info/">Kubernetes Security</a>. If you are deploying in multiple platform environments like on-premise or across multiple cloud providers, those resources will be very useful.  However, if you are deploying GKE clusters in GCP, you'll notice that there are a wide array of GCP and GKE-specific choices that need to be made.  The goal of this guide is to help you prioritize and implement a security posture that meets your organization's needs while taking advantage of all the benefits of the GKE service.</p>
<p>For each control and approach, the guide will attempt to help you understand the relative risks, relative likelihood, upfront cost and complexity, and ongoing cost and complexity of each security-related decision.  Deep links to official GCP/GKE and Kubernetes documentation will be provided to guide further reading.  Finally, links to hand-selected tools, books, and talk recordings will give additional support to the concepts for further exploration and understanding.</p>
<h2 id="audience">Audience<a class="headerlink" href="#audience" title="Permanent link">&para;</a></h2>
<p>This guide is focused specifically on the following roles working with a GKE deployment:</p>
<ul>
<li>Operations - Those responsible for deploying and maintaining the GCP Project, Networking, and GKE Cluster lifecycle.</li>
<li>Security - Those responsible for ensuring the operational environment adequately meets the organization's security standards and posture.</li>
<li>Security-minded developers - Those deploying operational workloads into the GKE cluster looking to follow security best practices.</li>
<li>Team Leads - Those managing teams implementing GKE clusters and responsible for prioritizing security with operational velocity.</li>
</ul>
<h2 id="structure-of-this-guide">Structure of this Guide<a class="headerlink" href="#structure-of-this-guide" title="Permanent link">&para;</a></h2>
<p>As each layer of a system builds upon the layer underneath, this guide begins with the foundation of all GCP services and explains how the structure of folders and projects in a GCP organization can help organize and guide security settings and permissions management.  Next, it covers the types of network configurations that support GKE clusters for different isolation strategies.  The core of the guide gets into cluster configuration, lifecycle and operations, observability, and the management of custom additions in the form of addons.  With a solid base in place, the guide covers the deployment and configuration of workloads and container images in terms of security best practices.  Finally, it covers certain security-related workflows such as auditing for conformance and handling security issues when an incident occurs.</p>
<p>Each topic area will cover:</p>
<ul>
<li>A few sentences to paragraphs on what the topic or setting is and does.</li>
<li>Why the topic or setting is important and the risks associated with it.</li>
<li>The versions it applies to, where applicable.</li>
<li>When you might want to prioritize adoption or implementation.</li>
<li>The upfront cost and complexity of deploying the change or approach.</li>
<li>The longer term cost and complexity of maintaining the system with this change or approach implemented.</li>
</ul>
<h2 id="gke-vs-building-kubernetes-yourself">GKE vs Building Kubernetes Yourself<a class="headerlink" href="#gke-vs-building-kubernetes-yourself" title="Permanent link">&para;</a></h2>
<p>For first time Kubernetes operators, it's a fantastic idea to follow <a href="https://github.com/kelseyhightower/kubernetes-the-hard-way">Kubernetes the Hard Way</a> by Kelsey Hightower and build a cluster from scratch.  It will give you a deep understanding of the components, their configuration settings, and an appreciation for the complexity of the system.  The very next thing you should do is leverage an approach to Kubernetes that ensures you and your team do as little of that work as possible.</p>
<p>In many cases, this is best done by working with a managed Kubernetes service like <a href="https://cloud.google.com/kubernetes-engine/">GKE</a>.  Successful Kubernetes cluster deployments require solid execution in wide range of areas, and it's impossible to be execellent in all of them at once.  From a business standpoint, you want your teams working on the problems that matter to your organization and to leave the boring operational work to the cloud service provider.  Kubernetes version upgrades, security patches, operating system maintenance, logging and monitoring infrastructure, and more are all things you want to be building "on top of" and not having to "build" yourself first.  Refer to the <a href="TODO">benefits of GKE</a> for further reading.</p>
<h2 id="kubernetes-security-maturity">Kubernetes Security Maturity<a class="headerlink" href="#kubernetes-security-maturity" title="Permanent link">&para;</a></h2>
<p>Throughout this guide, there will be dozens of security decisions and configuration tasks that you will be faced with prioritizing and implementing.  It's important to have some higher level structure and frame of reference for which items are required early or later on in your journey to Kubernetes security maturity.  <a href="https://www.youtube.com/watch?v=X-rSMkKqyt4">Kubernetes for Enterprise Security Requirements</a> really helps visually explain the progression path well.</p>
<p>Summarizing the key areas from this talk:</p>
<ul>
<li>Infrastructure Security - Does the surrounding environment and Kubernetes cluster provide a solid foundation for running workloads securely?</li>
<li>Software Supply Chain - Are the container images running in the cluster built from trusted sources and free of vulnerabilities?</li>
<li>Container Runtime Security - Are there capabilities in place to monitor what is happening inside the containers?</li>
</ul>
<p>Additionally:</p>
<ul>
<li>Security Observability and Response - Are there capabilities for knowing when a security incident occurs and processes in place to respond and remediate?</li>
</ul>
<p>As you progress through this guide, each of the topic areas should map back to one or more of these key areas and help align your decision along these lines.</p>
<h2 id="contributing">Contributing<a class="headerlink" href="#contributing" title="Permanent link">&para;</a></h2>
<p>This guide is a living document, and contributions in the form of issues and PRs are welcomed.  If you are considering writing new content, please open an issue outlining what you'd like to write about, where it might fit in, and other details.</p>
<p>If you found this guide useful, please consider donating your time attending and supporting your local cloud-native and Kubernetes-related meetups.  The success or failure of Kubernetes and the CNCF ecosystem is largely dependent on you and how you help elevate others with your compassion, assistance, and inclusivity.</p>
<h2 id="about-the-authors">About the Author(s)<a class="headerlink" href="#about-the-authors" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://twitter.com/bradgeesaman">@BradGeesaman</a> is an Independent Security Consultant currently focused on helping teams secure their GKE clusters in harmony with their desired operational velocity.</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="cloud_environment/" title="Cloud Environment" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Cloud Environment
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="assets/fonts/font-awesome.css">
    
      <a href="https://github.com/bgeesaman" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/bradgeesaman" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/bradgeesaman" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
    
  </body>
</html>